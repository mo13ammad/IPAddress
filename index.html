<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags (in English for better reach) -->
    <title>Comprehensive IP Address Lists for Countries & Game Servers</title>
    <meta name="description" content="An auto-updating repository providing fresh IP address lists for all countries and thousands of online game servers (like Steam). Ideal for firewalls, security research, and network applications.">
    <meta name="keywords" content="ip address, ip list, country ip, game ip, steam ip, server ip, firewall rules, geolocation, cidr, ipv4, ipv6, networking, security">
    <meta name="author" content="mo13ammad">
    <meta property="og:title" content="Comprehensive IP Address Lists for Countries & Game Servers">
    <meta property="og:description" content="Find and download up-to-date IPv4 and IPv6 CIDR lists for any country or online game server.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mo13ammad.github.io/IPAddress/"> <!-- Replace with your GitHub Pages URL -->
    
    <!-- Favicon (optional, but recommended) -->
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.svg" type="image/svg+xml">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles & Dark Mode Config -->
    <style>
        body {
            font-family: 'Inter', 'Vazirmatn', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #2d3748; /* dark:gray-800 */
        }
        textarea::-webkit-scrollbar-thumb {
            background-color: #4a5568; /* dark:gray-600 */
            border-radius: 20px;
            border: 2px solid #2d3748; /* dark:gray-800 */
        }
        .rtl {
            direction: rtl;
        }
        .ltr {
            direction: ltr;
        }
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Vazirmatn', 'sans-serif'],
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <!-- Header Section -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-3">IP Address Finder</h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mb-6 rtl">
                آی‌پی‌های به‌روز کشورها و سرورهای بازی را به راحتی پیدا و کپی کنید. این پروژه به طور خودکار به‌روز می‌شود.
            </p>
            <a href="https://github.com/mo13ammad/IPAddress" target="_blank" rel="noopener noreferrer" class="inline-flex items-center bg-gray-800 dark:bg-white text-white dark:text-black font-semibold py-2 px-4 rounded-lg shadow-lg hover:bg-gray-700 dark:hover:bg-gray-200 transition-all duration-300 transform hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="mr-2"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.91 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                Star on GitHub
            </a>
        </header>

        <main>
            <!-- Country IP Section -->
            <section class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md mb-8">
                <h2 class="text-2xl font-bold mb-4 rtl text-right">دریافت IP بر اساس کشور</h2>
                <div class="grid md:grid-cols-3 gap-4 items-start rtl">
                    <div class="md:col-span-1">
                        <label for="country-select" class="block mb-2 font-semibold text-gray-700 dark:text-gray-300 text-right">کشور را انتخاب کنید:</label>
                        <div class="relative">
                           <select id="country-select" class="w-full p-3 bg-gray-100 dark:bg-gray-700 border-2 border-transparent focus:border-blue-500 focus:ring-0 rounded-lg appearance-none text-right">
                                <option selected disabled>در حال بارگذاری کشورها...</option>
                           </select>
                           <div class="absolute inset-y-0 left-0 flex items-center px-3 pointer-events-none">
                               <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                           </div>
                        </div>
                         <div class="flex space-x-2 space-x-reverse mt-3">
                            <button id="select-ipv4" data-type="ipv4-countries" class="ip-type-btn-country flex-1 bg-blue-600 text-white py-2 px-4 rounded-md font-semibold">IPv4</button>
                            <button id="select-ipv6" data-type="ipv6-countries" class="ip-type-btn-country flex-1 bg-gray-200 dark:bg-gray-600 py-2 px-4 rounded-md font-semibold">IPv6</button>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <div class="flex justify-between items-center mb-2 rtl">
                            <label for="country-ips" class="font-semibold text-gray-700 dark:text-gray-300">لیست IP ها:</label>
                            <button id="copy-country-ips" class="text-sm bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 py-1 px-3 rounded-md transition-colors">کپی</button>
                        </div>
                        <div class="relative">
                            <textarea id="country-ips" rows="10" readonly class="w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-lg focus:ring-0 focus:border-gray-400 dark:focus:border-gray-500 border-2 border-transparent ltr" placeholder="Select a country and IP type to see the list..."></textarea>
                            <div id="country-loader" class="loader-container absolute inset-0 bg-gray-700 bg-opacity-50 flex items-center justify-center rounded-lg hidden">
                                <div class="loader h-12 w-12 rounded-full border-4 border-t-4 border-gray-200 ease-linear"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game IP Section -->
            <section class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 rtl text-right">دریافت IP بر اساس بازی</h2>
                 <div class="grid md:grid-cols-3 gap-4 items-start rtl">
                    <div class="md:col-span-1">
                        <label for="game-select" class="block mb-2 font-semibold text-gray-700 dark:text-gray-300 text-right">بازی را انتخاب کنید:</label>
                         <div class="relative">
                           <select id="game-select" class="w-full p-3 bg-gray-100 dark:bg-gray-700 border-2 border-transparent focus:border-blue-500 focus:ring-0 rounded-lg appearance-none text-right">
                                <option selected disabled>در حال بارگذاری بازی‌ها...</option>
                           </select>
                           <div class="absolute inset-y-0 left-0 flex items-center px-3 pointer-events-none">
                               <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                           </div>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <div class="flex justify-between items-center mb-2 rtl">
                             <label for="game-ips" class="font-semibold text-gray-700 dark:text-gray-300">لیست IP ها:</label>
                             <button id="copy-game-ips" class="text-sm bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 py-1 px-3 rounded-md transition-colors">کپی</button>
                        </div>
                        <div class="relative">
                            <textarea id="game-ips" rows="10" readonly class="w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-lg focus:ring-0 focus:border-gray-400 dark:focus:border-gray-500 border-2 border-transparent ltr" placeholder="Select a game to see the server IP list..."></textarea>
                            <div id="game-loader" class="loader-container absolute inset-0 bg-gray-700 bg-opacity-50 flex items-center justify-center rounded-lg hidden">
                                <div class="loader h-12 w-12 rounded-full border-4 border-t-4 border-gray-200 ease-linear"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Footer -->
        <footer class="text-center mt-10 pt-6 border-t border-gray-200 dark:border-gray-700">
            <p class="text-gray-500 dark:text-gray-400">
                Created by <a href="https://github.com/mo13ammad" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:underline">mo13ammad</a>.
                IP data is updated automatically.
            </p>
        </footer>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-5 right-5 bg-green-500 text-white py-2 px-5 rounded-lg shadow-xl opacity-0 translate-y-10 transition-all duration-300">
        Copied to clipboard!
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const GITHUB_REPO = 'mo13ammad/IPAddress';
            const GITHUB_BRANCH = 'main'; // Or 'master', depending on your repo

            const countrySelect = document.getElementById('country-select');
            const gameSelect = document.getElementById('game-select');
            const countryIpsText = document.getElementById('country-ips');
            const gameIpsText = document.getElementById('game-ips');
            const countryLoader = document.getElementById('country-loader');
            const gameLoader = document.getElementById('game-loader');
            
            const copyCountryBtn = document.getElementById('copy-country-ips');
            const copyGameBtn = document.getElementById('copy-game-ips');
            const toast = document.getElementById('toast');

            let selectedCountryIPType = 'ipv4-countries';
            
            // --- Mappings and Utility Functions ---

            const countryCodeToName = {
                "AF": "Afghanistan", "AX": "Åland Islands", "AL": "Albania", "DZ": "Algeria", "AS": "American Samoa", "AD": "Andorra", "AO": "Angola", "AI": "Anguilla", "AQ": "Antarctica", "AG": "Antigua and Barbuda",
                "AR": "Argentina", "AM": "Armenia", "AW": "Aruba", "AU": "Australia", "AT": "Austria", "AZ": "Azerbaijan", "BS": "Bahamas", "BH": "Bahrain", "BD": "Bangladesh", "BB": "Barbados", "BY": "Belarus",
                "BE": "Belgium", "BZ": "Belize", "BJ": "Benin", "BM": "Bermuda", "BT": "Bhutan", "BO": "Bolivia", "BQ": "Bonaire, Sint Eustatius and Saba", "BA": "Bosnia and Herzegovina", "BW": "Botswana",
                "BV": "Bouvet Island", "BR": "Brazil", "IO": "British Indian Ocean Territory", "BN": "Brunei Darussalam", "BG": "Bulgaria", "BF": "Burkina Faso", "BI": "Burundi", "CV": "Cabo Verde", "KH": "Cambodia",
                "CM": "Cameroon", "CA": "Canada", "KY": "Cayman Islands", "CF": "Central African Republic", "TD": "Chad", "CL": "Chile", "CN": "China", "CX": "Christmas Island", "CC": "Cocos (Keeling) Islands",
                "CO": "Colombia", "KM": "Comoros", "CG": "Congo", "CD": "Congo (DRC)", "CK": "Cook Islands", "CR": "Costa Rica", "CI": "Côte d'Ivoire", "HR": "Croatia", "CU": "Cuba", "CW": "Curaçao",
                "CY": "Cyprus", "CZ": "Czechia", "DK": "Denmark", "DJ": "Djibouti", "DM": "Dominica", "DO": "Dominican Republic", "EC": "Ecuador", "EG": "Egypt", "SV": "El Salvador", "GQ": "Equatorial Guinea",
                "ER": "Eritrea", "EE": "Estonia", "SZ": "Eswatini", "ET": "Ethiopia", "FK": "Falkland Islands (Malvinas)", "FO": "Faroe Islands", "FJ": "Fiji", "FI": "Finland", "FR": "France", "GF": "French Guiana",
                "PF": "French Polynesia", "TF": "French Southern Territories", "GA": "Gabon", "GM": "Gambia", "GE": "Georgia", "DE": "Germany", "GH": "Ghana", "GI": "Gibraltar", "GR": "Greece", "GL": "Greenland",
                "GD": "Grenada", "GP": "Guadeloupe", "GU": "Guam", "GT": "Guatemala", "GG": "Guernsey", "GN": "Guinea", "GW": "Guinea-Bissau", "GY": "Guyana", "HT": "Haiti", "HM": "Heard Island and McDonald Islands",
                "VA": "Holy See", "HN": "Honduras", "HK": "Hong Kong", "HU": "Hungary", "IS": "Iceland", "IN": "India", "ID": "Indonesia", "IR": "Iran", "IQ": "Iraq", "IE": "Ireland", "IM": "Isle of Man",
                "IL": "Israel", "IT": "Italy", "JM": "Jamaica", "JP": "Japan", "JE": "Jersey", "JO": "Jordan", "KZ": "Kazakhstan", "KE": "Kenya", "KI": "Kiribati", "KP": "North Korea", "KR": "South Korea",
                "KW": "Kuwait", "KG": "Kyrgyzstan", "LA": "Laos", "LV": "Latvia", "LB": "Lebanon", "LS": "Lesotho", "LR": "Liberia", "LY": "Libya", "LI": "Liechtenstein", "LT": "Lithuania", "LU": "Luxembourg",
                "MO": "Macao", "MG": "Madagascar", "MW": "Malawi", "MY": "Malaysia", "MV": "Maldives", "ML": "Mali", "MT": "Malta", "MH": "Marshall Islands", "MQ": "Martinique", "MR": "Mauritania",
                "MU": "Mauritius", "YT": "Mayotte", "MX": "Mexico", "FM": "Micronesia", "MD": "Moldova", "MC": "Monaco", "MN": "Mongolia", "ME": "Montenegro", "MS": "Montserrat", "MA": "Morocco", "MZ": "Mozambique",
                "MM": "Myanmar", "NA": "Namibia", "NR": "Nauru", "NP": "Nepal", "NL": "Netherlands", "NC": "New Caledonia", "NZ": "New Zealand", "NI": "Nicaragua", "NE": "Niger", "NG": "Nigeria", "NU": "Niue",
                "NF": "Norfolk Island", "MK": "North Macedonia", "MP": "Northern Mariana Islands", "NO": "Norway", "OM": "Oman", "PK": "Pakistan", "PW": "Palau", "PS": "Palestine, State of", "PA": "Panama",
                "PG": "Papua New Guinea", "PY": "Paraguay", "PE": "Peru", "PH": "Philippines", "PN": "Pitcairn", "PL": "Poland", "PT": "Portugal", "PR": "Puerto Rico", "QA": "Qatar", "RE": "Réunion", "RO": "Romania",
                "RU": "Russian Federation", "RW": "Rwanda", "BL": "Saint Barthélemy", "SH": "Saint Helena", "KN": "Saint Kitts and Nevis", "LC": "Saint Lucia", "MF": "Saint Martin (French part)", "PM": "Saint Pierre and Miquelon",
                "VC": "Saint Vincent and the Grenadines", "WS": "Samoa", "SM": "San Marino", "ST": "Sao Tome and Principe", "SA": "Saudi Arabia", "SN": "Senegal", "RS": "Serbia", "SC": "Seychelles", "SL": "Sierra Leone",
                "SG": "Singapore", "SX": "Sint Maarten (Dutch part)", "SK": "Slovakia", "SI": "Slovenia", "SB": "Solomon Islands", "SO": "Somalia", "ZA": "South Africa", "GS": "South Georgia", "SS": "South Sudan",
                "ES": "Spain", "LK": "Sri Lanka", "SD": "Sudan", "SR": "Suriname", "SJ": "Svalbard and Jan Mayen", "SE": "Sweden", "CH": "Switzerland", "SY": "Syrian Arab Republic", "TW": "Taiwan", "TJ": "Tajikistan",
                "TZ": "Tanzania", "TH": "Thailand", "TL": "Timor-Leste", "TG": "Togo", "TK": "Tokelau", "TO": "Tonga", "TT": "Trinidad and Tobago", "TN": "Tunisia", "TR": "Turkey", "TM": "Turkmenistan",
                "TC": "Turks and Caicos Islands", "TV": "Tuvalu", "UG": "Uganda", "UA": "Ukraine", "AE": "United Arab Emirates", "GB": "United Kingdom", "US": "United States", "UY": "Uruguay", "UZ": "Uzbekistan",
                "VU": "Vanuatu", "VE": "Venezuela", "VN": "Viet Nam", "VG": "Virgin Islands (British)", "VI": "Virgin Islands (U.S.)", "WF": "Wallis and Futuna", "EH": "Western Sahara", "YE": "Yemen", "ZM": "Zambia", "ZW": "Zimbabwe"
            };

            const showToast = (message) => {
                toast.textContent = message;
                toast.classList.remove('opacity-0', 'translate-y-10');
                setTimeout(() => {
                    toast.classList.add('opacity-0', 'translate-y-10');
                }, 2000);
            };

            const copyToClipboard = (text, type) => {
                if (!text) {
                    showToast('Nothing to copy!');
                    toast.classList.replace('bg-green-500', 'bg-red-500');
                    return;
                }
                navigator.clipboard.writeText(text).then(() => {
                    showToast('Copied to clipboard!');
                    toast.classList.replace('bg-red-500', 'bg-green-500');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    showToast('Failed to copy!');
                    toast.classList.replace('bg-green-500', 'bg-red-500');
                });
            };
            
            // --- API Fetching ---

            const fetchRepoDir = async (path) => {
                try {
                    const response = await fetch(`https://api.github.com/repos/${GITHUB_REPO}/contents/${path}?ref=${GITHUB_BRANCH}`);
                    if (!response.ok) {
                        throw new Error(`GitHub API error: ${response.status}`);
                    }
                    const data = await response.json();
                    return data.filter(item => item.type === 'file' && item.name.endsWith('.cidr')).map(item => item.name);
                } catch (error) {
                    console.error(`Failed to fetch directory '${path}':`, error);
                    return [];
                }
            };
            
            const fetchIPFile = async (filePath) => {
                try {
                    const response = await fetch(`https://cdn.jsdelivr.net/gh/${GITHUB_REPO}@${GITHUB_BRANCH}/${filePath}`);
                     if (!response.ok) {
                        throw new Error(`jsDelivr error: ${response.status}`);
                    }
                    const text = await response.text();
                    return text.trim();
                } catch (error) {
                    console.error(`Failed to fetch file '${filePath}':`, error);
                    return "Error loading IP list. Please try again.";
                }
            };

            // --- UI Population and Event Handling ---

            const populateCountries = async () => {
                const files = await fetchRepoDir('ipv4-countries');
                countrySelect.innerHTML = '<option value="" selected disabled>یک کشور را انتخاب کنید</option>';
                const sortedCountries = files
                    .map(file => file.replace('.cidr', ''))
                    .map(code => ({ code, name: countryCodeToName[code] || code }))
                    .sort((a, b) => a.name.localeCompare(b.name));

                sortedCountries.forEach(({code, name}) => {
                    const option = document.createElement('option');
                    option.value = code;
                    option.textContent = name;
                    countrySelect.appendChild(option);
                });
            };

            const populateGames = async () => {
                const files = await fetchRepoDir('game-servers/steam');
                gameSelect.innerHTML = '<option value="" selected disabled>یک بازی را انتخاب کنید</option>';
                const sortedGames = files
                    .map(file => file.replace('.cidr', '').replace(/_/g, ' '))
                    .sort((a, b) => a.localeCompare(b));

                sortedGames.forEach(gameName => {
                    const option = document.createElement('option');
                    option.value = gameName.replace(/ /g, '_') + ".cidr";
                    option.textContent = gameName;
                    gameSelect.appendChild(option);
                });
            };
            
            const handleCountrySelect = async () => {
                const countryCode = countrySelect.value;
                if (!countryCode) return;
                
                countryLoader.classList.remove('hidden');
                countryIpsText.value = '';
                const filePath = `${selectedCountryIPType}/${countryCode}.cidr`;
                const ips = await fetchIPFile(filePath);
                countryIpsText.value = ips;
                countryLoader.classList.add('hidden');
            };

            const handleGameSelect = async () => {
                const gameFile = gameSelect.value;
                if (!gameFile) return;

                gameLoader.classList.remove('hidden');
                gameIpsText.value = '';
                const filePath = `game-servers/steam/${gameFile}`;
                const ips = await fetchIPFile(filePath);
                gameIpsText.value = ips;
                gameLoader.classList.add('hidden');
            };

            const handleIPTypeSwitch = (e) => {
                const selectedBtn = e.target;
                if(selectedBtn.dataset.type === selectedCountryIPType) return;
                
                document.querySelectorAll('.ip-type-btn-country').forEach(btn => {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-200', 'dark:bg-gray-600');
                });
                
                selectedBtn.classList.add('bg-blue-600', 'text-white');
                selectedBtn.classList.remove('bg-gray-200', 'dark:bg-gray-600');

                selectedCountryIPType = selectedBtn.dataset.type;
                handleCountrySelect(); // Refresh IP list with the new type
            };


            // --- Initial Load ---
            populateCountries();
            populateGames();

            // --- Event Listeners ---
            countrySelect.addEventListener('change', handleCountrySelect);
            gameSelect.addEventListener('change', handleGameSelect);
            document.querySelectorAll('.ip-type-btn-country').forEach(btn => {
                btn.addEventListener('click', handleIPTypeSwitch);
            });
            copyCountryBtn.addEventListener('click', () => copyToClipboard(countryIpsText.value, 'Country'));
            copyGameBtn.addEventListener('click', () => copyToClipboard(gameIpsText.value, 'Game'));
        });
    </script>
</body>
</html>
